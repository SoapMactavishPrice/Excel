<template>
    <lightning-card title="">
        <div class="slds-p-around_medium" style="padding-top: 0 !important;">
            <div>
                <b>Total Quantity :</b> &nbsp;{totalQuantity}
            </div>
            <div>
                <b>Remaining Quantity :</b>
                <span style={remainingStyle}>&nbsp;{remainingQuantity}</span>
            </div>
            <div class="slds-grid slds-grid_align-end slds-m-bottom_medium">
                <lightning-button variant="brand" label="Add Row" onclick={addRow} disabled={disableAdd}>
                </lightning-button>
            </div>

            <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                <thead>
                    <tr>
                        <th>Quantity</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template for:each={lineItems} for:item="item">
                        <tr key={item.id}>
                            <td>
                                <lightning-input type="number" value={item.qty} min="1" onchange={handleQtyChange}
                                    data-id={item.id}></lightning-input>
                            </td>
                            <td>
                                <lightning-input type="date" value={item.startDate} onchange={handleStartDateChange}
                                    data-id={item.id}></lightning-input>
                            </td>
                            <td>
                                <lightning-input type="date" value={item.endDate} onchange={handleEndDateChange}
                                    data-id={item.id}></lightning-input>
                            </td>
                            <td>
                                <lightning-button-icon icon-name="utility:delete" alternative-text="Delete"
                                    onclick={removeRow} data-id={item.id}></lightning-button-icon>
                            </td>
                        </tr>
                    </template>
                </tbody>
            </table>

            <div class="slds-grid slds-grid_align-center slds-m-top_medium">
                <lightning-button variant="success" label="Save" onclick={handleSave} disabled={disableSave}>
                </lightning-button>
            </div>

        </div>
    </lightning-card>
</template>