<template>
    <lightning-card>
        <template if:true={showSpinner}>
            <lightning-spinner size="small"></lightning-spinner>
        </template>
        <!-- <lightning-quick-action-panel header="New Product Interested......a"> -->
        <lightning-layout multiple-rows class="slds-m-around_xx-small">


            <lightning-layout-item size="10" class="slds-p-around_small" large-device-size="10" small-device-size="10">
                <label class="slds-text-heading_medium slds-text-title_bold " style="font-size:21px">Add/Edit Product
                    Interested</label></lightning-layout-item>

            <lightning-layout-item size="2" class="slds-p-around_small" large-device-size="2" small-device-size="2">
                <lightning-button label="Add" alternative-text="Remove" title="Remove Answer" variant="brand" class=""
                    style="float: right;" onclick={addAnswerItem}>
                </lightning-button>
            </lightning-layout-item>

            <lightning-layout-item size="1" large-device-size="1" small-device-size="12"
                style="background: #dcdcdc;padding: 5px;">
                <label class="slds-m-left_x-small" te><strong>New Product ?</strong></label>
            </lightning-layout-item>

            <lightning-layout-item size="4" large-device-size="4" small-device-size="12"
                style="background: #dcdcdc;padding: 5px;">
                <label class="slds-m-left_x-small"><strong>Product Name</strong></label>
            </lightning-layout-item>

            <lightning-layout-item size="1" large-device-size="1" small-device-size="12"
                style="background: #dcdcdc;padding: 5px;">
                <label class="slds-m-left_x-small"><strong>Product Code</strong></label>
            </lightning-layout-item>

            <lightning-layout-item size="1" large-device-size="1" small-device-size="12"
                style="background: #dcdcdc;padding: 5px;">
                <label class="slds-m-left_x-small"><strong>Volume in Kgs</strong></label>
            </lightning-layout-item>

            <lightning-layout-item size="1" large-device-size="1" small-device-size="12"
                style="background: #dcdcdc;padding: 5px;">
                <label class="slds-m-left_x-small"><strong>Vol. Frequency</strong></label>
            </lightning-layout-item>

            <lightning-layout-item size="1" large-device-size="1" small-device-size="12"
                style="background: #dcdcdc;padding: 5px;">
                <label class="slds-m-left_x-small"><strong>List Price ({currencyCode})</strong></label>
            </lightning-layout-item>

            <lightning-layout-item size="1" large-device-size="1" small-device-size="12"
                style="background: #dcdcdc;padding: 5px;">
                <label class="slds-m-left_x-small"><strong>Exp Price ({currencyCode})</strong></label>
            </lightning-layout-item>

            <lightning-layout-item size="2" large-device-size="2" small-device-size="12"
                style="background: #dcdcdc;padding: 5px;">
                <div style="display:flex">
                    <label style="width:75%"><strong>Add in
                            Opportunity?</strong></label>

                    <label style=""><strong>Action</strong></label>
                </div>
            </lightning-layout-item>



            <template for:each={addAnswer} for:item="answer">

                <lightning-layout-item class="slds-p-vertical_small" key={answer.index} size="1" large-device-size="1"
                    small-device-size="12">
                    <!-- New_Product__c Checkbox -->
                    <lightning-input type="checkbox" variant="label-hidden" checked={answer.New_Product}
                        onchange={handleCheckboxChange} data-index={answer.index} class="slds-p-around_medium"
                        style="margin-top: -15px;">
                    </lightning-input>
                </lightning-layout-item>

                <lightning-layout-item class="slds-p-vertical_small" key={answer.index} size="5" large-device-size="4"
                    small-device-size="12">
                    <!-- pbe id => {answer.pbeId} -->

                    <template if:true={answer.New_Product}>
                        <lightning-layout horizontal-align="spread" style="margin-top: -16px;margin-left: -15px">
                            <lightning-layout-item size="12" large-device-size="12" small-device-size="12">
                                <lightning-input type="text" variant="label-hidden" value={answer.New_Product_Name}
                                    onchange={handleTextInputChange} data-index={answer.index}
                                    class="slds-p-around_medium" style="margin-right: -12px;">
                                </lightning-input>
                            </lightning-layout-item>
                        </lightning-layout>
                    </template>

                    <template if:false={answer.New_Product}>
                        <template lwc:if={answer.pbeId}>
                            <c-look-up-component object-api-name="PricebookEntry" icon-name="standard:account"
                                data-index={answer.index} style="width: 180" data-label="pbeId" index={answer.index}
                                currency-code={currencyCode} default-record-id={answer.pbeId} return-fields=""
                                family={answer.prodFamily} sort-column="" display-fields="" query-fields=""
                                onrecordselection={lookupRecord} onfocus={lookupRecord}>
                            </c-look-up-component>
                        </template>


                        <template lwc:else>
                            <c-look-up-component object-api-name="PricebookEntry" icon-name="standard:account"
                                data-index={answer.index} style="width: 180" data-label="pbeId" return-fields=""
                                currency-code={currencyCode} family={answer.prodFamily} sort-column="" display-fields=""
                                query-fields="" onrecordselection={lookupRecord} onfocus={lookupRecord}>
                            </c-look-up-component>
                        </template>
                    </template>



                </lightning-layout-item>
                <lightning-layout-item class="slds-p-around_small" key={answer.index} size="1" large-device-size="1"
                    small-device-size="12">
                    <lightning-input variant="label-hidden" data-label="prodCode" value={answer.prodCode} disabled
                        data-index={answer.index} onchange={handleScoreChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item class="slds-p-around_small" key={answer.index} size="1" large-device-size="1"
                    small-device-size="12">
                    <lightning-input variant="label-hidden" data-label="volume" data-index={answer.index}
                        value={answer.volume} onchange={handleScoreChange}></lightning-input>
                </lightning-layout-item>

                <lightning-layout-item class="slds-p-around_small" key={answer.index} size="1" large-device-size="1"
                    small-device-size="12">
                    <lightning-combobox name="frequency" variant="label-hidden" value={answer.frequency}
                        options={frequencyOptions} onchange={handlefrequencyChange} data-index={answer.index}>
                    </lightning-combobox>
                </lightning-layout-item>

                <lightning-layout-item class="slds-p-around_small" key={answer.index} size="1" large-device-size="1"
                    small-device-size="12">
                    <lightning-input variant="label-hidden" data-label="price" data-index={answer.index} disabled
                        value={answer.unitPrice} onchange={handleScoreChange}></lightning-input>

                </lightning-layout-item>
                <lightning-layout-item class="slds-p-around_small" key={answer.index} size="1" large-device-size="1"
                    small-device-size="12">
                    <lightning-input variant="label-hidden" data-label="price" data-index={answer.index}
                        value={answer.price} onchange={handleScoreChange}></lightning-input>

                </lightning-layout-item>
                <lightning-layout-item key={answer.index} size="2" large-device-size="2" small-device-size="12">
                    <div style="display:flex">
                         <lightning-input variant="label-hidden" type="checkbox" class="slds-p-around_medium"

                            style="width:70%;text-align: center;" value={answer.Add_In_Opty} data-label="Add_In_Opty"

                            checked={answer.Add_In_Opty} data-index={answer.index} onchange={handleSelectChange}>

                        </lightning-input>

                        <lightning-button-icon icon-name="utility:delete" alternative-text="Remove"
                            data-edit={answer.isEdit} data-inid={answer.inId} title="Remove Answer"
                            onclick={removeAnswer} data-index={answer.index}
                            class="slds-m-left_xx-small slds-p-around_medium">
                        </lightning-button-icon>
                    </div>
                </lightning-layout-item>

                <!-- <lightning-layout-item class="slds-p-vertical_small" key={answer.index} size="1" large-device-size="1"
                    small-device-size="12">
                    <div style="display:flex" class="">
                        <lightning-button-icon icon-name="utility:delete" alternative-text="Remove"
                            data-edit={answer.isEdit} data-inid={answer.inId} title="Remove Answer"
                            onclick={removeAnswer} data-index={answer.index} class="slds-m-left_xx-small">
                        </lightning-button-icon>
                    </div>
                </lightning-layout-item> -->


            </template>

        </lightning-layout>

        <div slot="footer">
            <div class="slds-align_absolute-center" style="display:flex">
                <lightning-button variant="neutral" label="Cancel" onclick={handleCancel}></lightning-button>
                <lightning-button variant="brand" label="Save" class="slds-m-left_xx-small" onclick={save}>
                </lightning-button>
            </div>
        </div>
    </lightning-card>
    <!-- </lightning-quick-action-panel> -->

</template>